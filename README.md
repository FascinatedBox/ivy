ivy
===

### Overview

Ivy is a basic image viewer that exports a small dbus interface.

### Usage

```
ivy [options] [<actions>...] files...

Options:
    --minimized            Start the viewer minimized

Actions:
    --close:               Close the viewer and quit.
    --scroll-<DIRECTION>:  Scroll in a particular direction
                           (left, up, right, down)
    --zoom-<in|out>:       Adjust the zoom on the image
    -h | --help:           Show help (this message) and exit
```

If `ivy` is launched and the viewer is not present, then the viewer window is
created (except for -h). Invalid command-line options are ignored. Any number of
paths can be provided, and all files will be opened.

`--minimized` is ignored if the viewer has already been launched.

### Why

**Streaming**: I originally created this project to show screenshots of a game
window somewhere offscreen. Having a command-line client makes it possible to
have a hotkey execute a script that reloads the viewer with a screenshot.

**Example project**: This project was supposed to be an example of a basic
program that uses Qt's dbus.

I would not recommend using this as an example, because of the bugs listed
below. I have spent more time than I want to admit trying to work with this
project's build system, so I am unlikely to fix either of the bugs listed.

## Bugs

On my Linux machine, `make` itself is fine any number of times. However, using
`make clean` will cause successive `make` usages to complain about a moc error.
It's probably something I'm doing, but I have no idea what, but I've found that
`cmake .` on the project root fixes whatever it is.

I don't like how some autogenerated files are not all constrained to the hidden
`.mocuic` directory.

### New Messages

In `server/src/ivyservice.{cpp,h}`, create a new public slot that implements the
action or dispatches to `IvyServer`. `IvyServer` bus methods have a prefix of
`bus*` as a convention.

In `client/src/client.cpp`, add entries to the option list, longopts, and help,
then implement the option.

The server's `IvyService` uses an autogenerated (by Qt) dbus adaptor to receive
dbus arguments. The adaptor is updated when the project is rebuilt.

### Credit

Ivy's design is largely inspired by xfce's `ristretto`.
