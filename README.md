ivy
===

![Demo image](/resources/demo.gif)

### Overview

Ivy is a basic image viewer that exports a small dbus interface. Ivy comes in
two parts: A server that shows images, and a command-line client that sends
messages.

### Usage

The server is built as `ivyserver` and is meant to be run without arguments. If
an existing server is already running, then `ivyserver` will exit.

The client is built as `ivyclient` and sends messages by parsing arguments.
Valid arguments (`ivyclient --help`):

```
    -o | --open PATH:
        Load PATH in the server and switch to it.
        Images are *not* reloaded if the file changes.

    --close:               Close the server and quit.
    --scroll-<DIRECTION>:  Scroll in a particular direction
                           (left, up, right, down)
    --zoom-<in|out>:       Adjust the zoom on the image
    -h | --help:           Show help (this message) and exit
```

### Why

**Example project**: This project is a working example of using CMake to build a
Qt project that uses DBus. Additionally, the configuration of this project tries
to put autogenerated files in a hidden (`.mocuic`) directory where possible.

**Streaming**: I originally created this project to show screenshots of a game
window somewhere offscreen. Having a command-line client makes it possible to
have a hotkey execute a script that reloads the viewer with a screenshot.

### New Messages

In `server/src/ivyservice.{cpp,h}`, create a new public slot that implements the
action or dispatches to `IvyServer`. `IvyServer` bus methods have a prefix of
`bus*` as a convention.

In `client/src/client.cpp`, add entries to the option list, longopts, and help,
then implement the option.

The server's `IvyService` uses an autogenerated (by Qt) dbus adaptor to receive
dbus arguments. The adaptor is updated when the project is rebuilt.

### Credit

Ivy's design is largely inspired by xfce's `ristretto`.
